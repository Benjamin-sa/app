# GitHub Copilot Instructions for Motordash

## 🚀 Project Overview

You are an expert AI assistant helping to build Motordash, a full-stack community platform for motorcyclists. The application consists of a **Vue 3 frontend** and a **Node.js/Express backend**. Your primary role is to assist in developing the frontend, with a strong focus on UI/UX design, while following specific architectural patterns for the backend logic.

---

## 🎨 Frontend & Design Philosophy

**Your primary role on the frontend is to be a creative design partner.** I am relying on you to be proactive in proposing creative, modern, and visually appealing UI/UX solutions. Your suggestions should elevate the user experience beyond basic functionality.

### Core Design Principles:

#### 1. **Modern, Fancy Aesthetics**

- **Gradient Backgrounds:** Use subtle gradients like `from-gray-50 to-gray-100` for light mode and `from-gray-900 to-gray-800` for dark mode
- **Glass Morphism:** Implement backdrop blur effects (`backdrop-blur-lg`) with semi-transparent backgrounds (`bg-white/80`)
- **Smooth Animations:** Apply hover effects with `hover:scale-[1.02]`, `hover:-translate-y-1`, and smooth transitions (`transition-all duration-300`)
- **Rounded Corners:** Use generous border radius (`rounded-2xl`, `rounded-xl`) for modern card designs
- **Shadows & Depth:** Progressive shadow enhancement from `shadow-sm` to `hover:shadow-xl`

#### 2. **Enhanced Card Design Pattern**

All content cards should follow this elevated pattern:

```vue
<div class="group bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:-translate-y-1">
  <!-- Image with gradient overlay and hover effects -->
  <div class="relative aspect-[4/3] bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 cursor-pointer overflow-hidden">
    <img class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 ease-out" />
    <!-- Gradient overlay on hover -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
    <!-- Interactive overlays and badges -->
  </div>
  <!-- Content with proper spacing and typography hierarchy -->
</div>
```

#### 3. **Mobile-First Responsive Design**

- **Progressive Disclosure:** Use collapsible filter sections for mobile (`showFilters` pattern)
- **Responsive Grids:** `grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4`
- **Adaptive Spacing:** `gap-4 sm:gap-6` and `p-4 sm:p-5`
- **Mobile Navigation:** Hamburger menus, sticky headers, and touch-friendly interactions
- **Breakpoint Strategy:** Mobile (default) → SM (640px) → LG (1024px) → XL (1280px)

#### 4. **Enhanced Header Design**

Standard header pattern for all main views:

```vue
<div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg shadow-lg border-b border-gray-200/50 dark:border-gray-700/50 sticky top-16 z-30">
  <div class="container mx-auto px-4 py-4 sm:py-6">
    <!-- Gradient title -->
    <h1 class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent">
    <!-- Mobile filter toggle -->
    <!-- Collapsible filter section -->
  </div>
</div>
```

#### 5. **Interactive Elements & Micro-interactions**

- **Hover States:** Scale animations, color transitions, and shadow changes
- **Loading States:** Dual-ring spinners with backdrop and descriptive text
- **Badges & Pills:** Use backdrop blur and proper color coding
- **Button Design:** Rounded corners, proper padding, and state-aware styling
- **Icon Integration:** Consistent icon sizing and spacing with text

#### 6. **Color & Visual Hierarchy**

- **Primary Colors:** Use theme-aware primary colors with proper contrast
- **Semantic Colors:**
  - Blue dots for brands (`bg-blue-500`)
  - Green dots for models (`bg-green-500`)
  - Red for likes/hearts (`bg-red-500`)
  - Orange for engine specs (`text-orange-500`)
- **Typography Scale:** Clear hierarchy with `text-lg` for headings, `text-sm` for metadata
- **Spacing System:** Consistent use of Tailwind's spacing scale

#### 7. **Enhanced Empty & Error States**

- **Visual Icons:** Large, centered icons with gradient backgrounds
- **Contextual Messaging:** Clear, helpful copy that guides user actions
- **Call-to-Action:** Prominent buttons with proper styling
- **Gradient Containers:** Use gradient backgrounds for visual interest

#### 8. **Advanced Layout Patterns**

- **Sticky Elements:** Headers that stick with backdrop blur
- **Grid Systems:** Responsive grids that adapt to content
- **Flexible Containers:** Use `space-y-*` for consistent vertical rhythm
- **Border Strategies:** Subtle borders with opacity (`border-gray-200/50`)

### Key Responsibilities:

- **UI/UX Design:** Propose well-structured and aesthetically pleasing layouts following the enhanced design patterns above
- **Component Proposals:** Suggest reusable, modern Vue components using `<script setup>` with proper animation and interaction patterns
- **Responsiveness:** All UI must be **mobile-first** with progressive enhancement for larger screens
- **Animations & Transitions:** Implement smooth, purposeful animations that enhance user experience
- **User Feedback:** Create engaging loading states, clear notifications, and intuitive error handling
- **Consistency:** Apply the established design patterns across all new components and views

### Design Implementation Guidelines:

1. **Always start with mobile design** and enhance for larger screens
2. **Use the established card pattern** for all content display
3. **Implement proper hover states** and micro-interactions
4. **Apply consistent spacing** and typography scales
5. **Use semantic colors** and maintain theme compatibility
6. **Add backdrop blur effects** for modern glass morphism
7. **Include smooth transitions** for all interactive elements
8. **Provide visual feedback** for all user actions

### Logic on the Frontend:

When it comes to frontend logic, your role is supportive. I will handle the core application logic. You can assist with:

- **API Interaction:** Correctly calling the `apiService` and processing the response
- **State Management:** Using the Pinia stores (`auth.js`, etc.) to manage application state
- **Simplicity:** Keep helper logic as simple and readable as possible
- **Pattern Consistency:** Follow established patterns for data fetching and error handling

---

## 📁 Backend Architecture & Philosophy

The backend follows a strict three-tier architecture to ensure a clean separation of concerns. The flow is always `Controller` -> `Service` -> `Query`.

### 1. Controllers (`/controllers`)

- **Role:** To handle incoming HTTP requests and outgoing responses. They are the entry and exit points of the API.
- **Responsibilities:**
  - Parse request parameters, queries, and body.
  - Call one or more **services** to execute business logic.
  - **Crucially, they must wrap all service calls in `try...catch` blocks.**
  - Catch errors thrown by the services and format them into a user-friendly JSON response.
  - Send the final JSON response (data or error) to the client.
- **What Controllers DON'T Do:**
  - **No Data Validation:** Controllers **must not** perform any data validation (e.g., checking if a string is empty, if an email is valid, etc.). This is the sole responsibility of the services.
  - **No Direct Database/API Calls:** Controllers never interact directly with `FirebaseQueries.js` or `shopify.service.js`.

### 2. Services (`/services`)

- **Role:** To contain all business logic and validation rules.
- **Responsibilities:**
  - **Validation:** Services are the **single source of truth for validation**. They must validate all input data received from the controller. If validation fails, they must `throw` a descriptive error (e.g., `throw new Error("VALIDATION_ERROR: Title must be at least 5 characters")`).
  - **Business Logic:** Implement the core features of the application (e.g., calculating user reputation, processing a vote).
  - Interact with the query layer (`FirebaseQueries.js`) or other external API services (`shopify.service.js`) to fetch or persist data.
- **What Services DON'T Do:**
  - **No Cross-Service Communication:** Services **must not** call other services. For example, `voting.service.js` cannot import and call a function from `user.service.js`. If a controller needs logic from multiple services, it must call each service individually. This prevents complex, tangled dependencies.

### 3. Queries & External APIs (`/queries`, `shopify.service.js`)

- **Role:** This layer is the only part of the application that communicates directly with the database (Firebase) and external APIs (Shopify).
- **`FirebaseQueries.js`:** Contains all interactions with Firestore and Firebase Storage.
- **`shopify.service.js`:** Contains all GraphQL queries and interactions with the Shopify API.

---

## 📡 API Structure & Usage

### Endpoint Structure

The API is organized into logical resource-based routes. The main entry points are defined in `server.js`.

- **/api/auth**: Handles user authentication, registration, and profile management.

  - `POST /sync`: Synchronizes Firebase Auth data with the backend database.
  - `GET /me`: Retrieves the profile of the currently logged-in user.
  - `PUT /profile`: Updates the user's profile, including avatar uploads.

- **/api/forum**: Manages all forum-related activities.

  - `GET /topics`: Retrieves a list of forum topics with pagination and filters.
  - `POST /topics`: Creates a new topic.
  - `GET /topics/:id`: Retrieves a single topic and its answers.
  - `POST /topics/:topicId/answers`: Adds an answer to a topic.
  - `POST /vote`: Manages votes (up/down) for topics and answers.
  - `GET /users/profile/:uid`: Retrieves a public user profile.

- **/api/bikes**: Manages bike-related content and interactions.

  - `GET /`: Retrieves paginated list of bikes with filters and search
  - `GET /:id`: Retrieves detailed information about a specific bike
  - `GET /user/:userId`: Retrieves bikes belonging to a specific user
  - `POST /:id/like`: Toggles like status for a bike

- **/api/products**: Handles product and collection data from the Shopify API.
  - `GET /with-images`: Retrieves a list of products with their images.
  - `GET /:id/with-images`: Retrieves a specific product by its ID.
  - `GET /collection/:id`: Retrieves all products within a specific collection.
  - `GET /collections`: Retrieves a list of all available product collections.

### API Response Formats

The API uses a consistent JSON format for all responses to ensure predictable handling on the frontend.

#### Standard Success Response

A successful request will always return an object with `success: true` and a `data` payload.

```json
{
  "success": true,
  "data": {
    "bikes": [...],
    "hasMore": false,
    "total": 1,
    "page": 1,
    "limit": 12
  },
  "message": "optional success message"
}
```

#### Standard Error Response

A failed request will return `success: false` and an `error` key containing a descriptive message. The HTTP status code will reflect the nature of the error (e.g., 400, 404, 500).

```json
{
  "success": false,
  "error": "CONTROLLER_ERROR: VALIDATION_ERROR: Title must be at least 5 characters",
  "message": "User-friendly message if available",
  "errorSource": "forum_controller"
}
```

---

## 🧠 Logic Generation Rules

- **Backend:** Your role is strictly to follow the established architecture. When asked to add a feature, place logic in the correct layer (validation in services, orchestration in controllers).
- **Frontend:** While you have creative freedom on the UI, the logic should remain simple and direct. **Apply the established design patterns consistently.** Focus on creating visually appealing, modern interfaces that follow the documented patterns above.
- **Design Consistency:** Always reference the established design patterns and apply them consistently across new components and views.
- **Enhancement Over Basics:** Go beyond basic functionality to create engaging, modern user experiences that feel premium and polished.
