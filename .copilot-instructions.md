# GitHub Copilot Instructions for Motordash Frontend

## Project Context

You are helping build the frontend for Motordash, a motorcycle community platform with forum and product catalog features. The backend API is already built and running on localhost:3000.

## Technology Stack

- **Framework**: Vue 3+ with Vite
- **Styling**: Tailwind CSS
- **Authentication**: Firebase Auth
- **HTTP Client**: Axios
- **Routing**: Vue Router
- **State Management**: Pinia

## Existing Backend API

The backend is fully functional with these endpoints:

- Authentication: `/api/auth/*`
- Forum: `/api/forum/*`
- Products: `/api/products/*`

## Frontend Structure

```
src/
├── components/          # Reusable UI components
│   ├── common/         # Button, Modal, Loading, etc.
│   ├── auth/           # Login, Register, UserProfile
│   ├── forum/          # TopicCard, AnswerList, VoteButton
│   └── products/       # ProductCard, ProductGrid
├── views/              # Route components
│   ├── HomeView.vue
│   ├── ForumView.vue
│   ├── TopicView.vue
│   ├── ProductsView.vue
│   └── ProfileView.vue
├── services/           # Already exists
│   ├── api.service.js  # HTTP client (complete)
│   └── auth.service.js # Firebase auth (needs building)
├── stores/             # Pinia stores
│   ├── auth.js
│   └── forum.js
├── composables/        # Vue composables
├── utils/              # Helper functions
├── router/             # Vue Router configuration
│   └── index.js
└── App.vue             # Main app component
```

## Key Requirements

### 1. Authentication System

- Use Firebase Auth for login/register
- Protect routes that require authentication
- Show user status in navigation
- Handle token refresh automatically
- Integration with existing api.service.js

### 2. Forum Features

- **Topic Listing**: Paginated list with search/filter
- **Topic Detail**: Show topic + answers with voting
- **Create Topic**: Rich text editor with image upload
- **Answer System**: Nested replies with voting
- **User Profiles**: Show user stats and activity

### 3. Product Catalog

- **Product Grid**: Responsive grid with images
- **Product Detail**: Full product information
- **Category Filter**: Filter by product categories
- **Search**: Search products by name/description

### 4. UI/UX Guidelines

- **Responsive**: Mobile-first design
- **Loading States**: Show loading spinners/skeletons
- **Error Handling**: User-friendly error messages
- **Accessibility**: ARIA labels, keyboard navigation
- **Performance**: Lazy loading, code splitting

### Authentication Pattern

```javascript
// Check auth status
const user = await authService.getCurrentUser();

// Protected API calls automatically include token
const result = await apiService.createTopic(topicData);
```

## Component Patterns

### Standard Component Structure (Composition API)

```vue
<template>
  <div class="component-container">
    <LoadingSpinner v-if="loading" />
    <ErrorMessage v-else-if="error" :message="error" />
    <div v-else>
      <!-- Component content -->
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";
import { useAuthStore } from "@/stores/auth";
import apiService from "@/services/api.service";
import LoadingSpinner from "@/components/common/LoadingSpinner.vue";
import ErrorMessage from "@/components/common/ErrorMessage.vue";

// Props
const props = defineProps({
  prop1: String,
  prop2: Number,
});

// Composables/Stores
const authStore = useAuthStore();

// Reactive data
const data = ref(null);
const loading = ref(false);
const error = ref(null);

// Methods
const fetchData = async () => {
  loading.value = true;
  try {
    const result = await apiService.someEndpoint();
    if (result.success) {
      data.value = result.data.data;
    } else {
      error.value = result.message;
    }
  } catch (err) {
    error.value = "An error occurred";
  } finally {
    loading.value = false;
  }
};

// Lifecycle
onMounted(() => {
  fetchData();
});
</script>

<style scoped>
/* Component-specific styles if needed */
</style>
```

### Styling Guidelines

- Use Tailwind CSS classes
- Consistent spacing: `p-4`, `m-4`, `gap-4`
- Color scheme: Primary (blue), secondary (gray), accent (green for success, red for errors)
- Typography: Consistent font sizes and weights
- Responsive breakpoints: `sm:`, `md:`, `lg:`, `xl:`

### Form Handling

```vue
<template>
  <form @submit.prevent="handleSubmit">
    <!-- Form fields -->
    <div v-if="errors.submit" class="text-red-500">{{ errors.submit }}</div>
    <button type="submit" :disabled="loading">Submit</button>
  </form>
</template>

<script setup>
import { ref } from "vue";
import { useRouter } from "vue-router";
import apiService from "@/services/api.service";

const router = useRouter();

const formData = ref({});
const errors = ref({});
const loading = ref(false);

const handleSubmit = async () => {
  errors.value = {};
  loading.value = true;

  try {
    const result = await apiService.createTopic(formData.value);
    if (result.success) {
      // Handle success
      router.push("/forum");
    } else {
      errors.value = { submit: result.message };
    }
  } catch (err) {
    errors.value = { submit: "An error occurred" };
  } finally {
    loading.value = false;
  }
};
</script>
```

## Specific Component Requirements

### Navigation Bar

- Logo/brand name
- Main navigation links
- User menu (when authenticated)
- Search bar
- Mobile hamburger menu

### Topic Card

- Title, author, creation date
- Vote score and answer count
- Category badge
- Preview of content
- View count

### Answer Component

- Author info and timestamp
- Answer content with formatting
- Vote buttons (up/down)
- Reply button and nested replies
- "Best Answer" marking

### Product Card

- Product image
- Name and price
- Quick view button
- Add to favorites

### Search Component

- Real-time search suggestions
- Recent searches
- Category filters
- Search results with highlighting

## State Management with Pinia

### Auth Store

```javascript
import { defineStore } from "pinia";
import { ref, computed } from "vue";

export const useAuthStore = defineStore("auth", () => {
  const user = ref(null);
  const loading = ref(false);

  const isAuthenticated = computed(() => !!user.value);

  const login = async (credentials) => {
    loading.value = true;
    try {
      // Login logic
    } finally {
      loading.value = false;
    }
  };

  const logout = () => {
    user.value = null;
  };

  return {
    user,
    loading,
    isAuthenticated,
    login,
    logout,
  };
});
```

### Forum Store

```javascript
// Manage forum state like current topic, answers, voting status
export const useForumStore = defineStore("forum", () => {
  const topics = ref([]);
  const currentTopic = ref(null);

  const fetchTopics = async () => {
    // Fetch topics logic
  };

  return {
    topics,
    currentTopic,
    fetchTopics,
  };
});
```

## Vue Router Configuration

```javascript
import { createRouter, createWebHistory } from "vue-router";
import { useAuthStore } from "@/stores/auth";

const routes = [
  {
    path: "/",
    name: "Home",
    component: () => import("@/views/HomeView.vue"),
  },
  {
    path: "/forum",
    name: "Forum",
    component: () => import("@/views/ForumView.vue"),
  },
  {
    path: "/forum/:id",
    name: "Topic",
    component: () => import("@/views/TopicView.vue"),
    meta: { requiresAuth: true },
  },
];

const router = createRouter({
  history: createWebHistory(),
  routes,
});

router.beforeEach((to, from, next) => {
  const authStore = useAuthStore();

  if (to.meta.requiresAuth && !authStore.isAuthenticated) {
    next("/login");
  } else {
    next();
  }
});

export default router;
```

## Composables Pattern

```javascript
// composables/useApi.js
import { ref } from "vue";
import apiService from "@/services/api.service";

export function useApi() {
  const loading = ref(false);
  const error = ref(null);

  const execute = async (apiCall) => {
    loading.value = true;
    error.value = null;

    try {
      const result = await apiCall();
      if (result.success) {
        return result.data;
      } else {
        error.value = result.message;
        return null;
      }
    } catch (err) {
      error.value = "An error occurred";
      return null;
    } finally {
      loading.value = false;
    }
  };

  return {
    loading: readonly(loading),
    error: readonly(error),
    execute,
  };
}
```

## Error Handling Strategy

- Network errors: "Unable to connect to server"
- Authentication errors: Redirect to login
- Validation errors: Show field-specific messages
- 404 errors: "Content not found" page
- 500 errors: "Something went wrong" with retry option

## Performance Optimization

- Use defineAsyncComponent for lazy loading
- Implement virtual scrolling for long lists
- Lazy load images with placeholders
- Code split routes with dynamic imports
- Cache API responses when appropriate
- Use v-memo for expensive list rendering

## Testing Considerations

- Test authentication flows with Vue Test Utils
- Test API error scenarios
- Test responsive design
- Test accessibility features
- Mock API responses for unit tests
- Use Vitest for unit testing

## Vue 3 Best Practices

- Use Composition API for complex logic
- Prefer `<script setup>` syntax
- Use TypeScript for better development experience
- Follow Vue 3 reactivity principles
- Use Teleport for modals and overlays
- Implement proper error boundaries

Remember: The backend API is fully functional, so focus on creating a great user experience that leverages all the available endpoints using Vue 3's modern features and ecosystem.
